<template>
  <div class="docs-container">
    <h2>ğŸ“– API æ–‡æ¡£</h2>
    
    <!-- å¿«é€Ÿå¯¼èˆª -->
    <el-card class="nav-card" shadow="hover">
      <el-space wrap>
        <el-button @click="scrollTo('utils')">å·¥å…·å‡½æ•°</el-button>
        <el-button @click="scrollTo('components')">ç»„ä»¶</el-button>
        <el-button type="primary" @click="openGithub">
          <el-icon><Link /></el-icon>
          GitHub ä»“åº“
        </el-button>
      </el-space>
    </el-card>

    <!-- å·¥å…·å‡½æ•°æ–‡æ¡£ -->
    <div id="utils" class="section">
      <el-card shadow="hover">
        <template #header>
          <h3>ğŸ› ï¸ utils - å·¥å…·å‡½æ•°å‘½åç©ºé—´</h3>
        </template>
        
        <el-collapse>
          <el-collapse-item title="formatDate(date, format)" name="1">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ä¸ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²</p>
              <p><strong>å‚æ•°ï¼š</strong></p>
              <ul>
                <li><code>date</code> - Date | string | number - æ—¥æœŸå¯¹è±¡ã€æ—¶é—´æˆ³æˆ–æ—¥æœŸå­—ç¬¦ä¸²</li>
                <li><code>format</code> - string - æ ¼å¼åŒ–æ¨¡æ¿ï¼Œé»˜è®¤ï¼š'YYYY-MM-DD HH:mm:ss'</li>
              </ul>
              <p><strong>è¿”å›å€¼ï¼š</strong>string - æ ¼å¼åŒ–åçš„æ—¥æœŸå­—ç¬¦ä¸²</p>
              <div class="code-example">
                <pre><code>import { utils } from '@edwardchan/web-toolkit'

utils.formatDate(new Date(), 'YYYY-MM-DD')
// => '2026-02-10'</code></pre>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="getRelativeTime(date)" name="2">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>è·å–ç›¸å¯¹æ—¶é—´æè¿°ï¼ˆå¦‚ï¼šåˆšåˆšã€5åˆ†é’Ÿå‰ã€2å°æ—¶å‰ç­‰ï¼‰</p>
              <p><strong>å‚æ•°ï¼š</strong></p>
              <ul>
                <li><code>date</code> - Date | string | number - æ—¥æœŸå¯¹è±¡ã€æ—¶é—´æˆ³æˆ–æ—¥æœŸå­—ç¬¦ä¸²</li>
              </ul>
              <p><strong>è¿”å›å€¼ï¼š</strong>string - ç›¸å¯¹æ—¶é—´æè¿°</p>
              <div class="code-example">
                <pre><code>import { utils } from '@edwardchan/web-toolkit'

utils.getRelativeTime(new Date(Date.now() - 60000))
// => '1åˆ†é’Ÿå‰'</code></pre>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="isToday(date)" name="3">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>åˆ¤æ–­ç»™å®šæ—¥æœŸæ˜¯å¦ä¸ºä»Šå¤©</p>
              <p><strong>å‚æ•°ï¼š</strong></p>
              <ul>
                <li><code>date</code> - Date | string | number - æ—¥æœŸå¯¹è±¡ã€æ—¶é—´æˆ³æˆ–æ—¥æœŸå­—ç¬¦ä¸²</li>
              </ul>
              <p><strong>è¿”å›å€¼ï¼š</strong>boolean - æ˜¯å¦ä¸ºä»Šå¤©</p>
              <div class="code-example">
                <pre><code>import { utils } from '@edwardchan/web-toolkit'

utils.isToday(new Date())
// => true</code></pre>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="isThisWeek(date)" name="4">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>åˆ¤æ–­ç»™å®šæ—¥æœŸæ˜¯å¦ä¸ºæœ¬å‘¨</p>
              <p><strong>å‚æ•°ï¼š</strong></p>
              <ul>
                <li><code>date</code> - Date | string | number - æ—¥æœŸå¯¹è±¡ã€æ—¶é—´æˆ³æˆ–æ—¥æœŸå­—ç¬¦ä¸²</li>
              </ul>
              <p><strong>è¿”å›å€¼ï¼š</strong>boolean - æ˜¯å¦ä¸ºæœ¬å‘¨</p>
              <div class="code-example">
                <pre><code>import { utils } from '@edwardchan/web-toolkit'

utils.isThisWeek(new Date())
// => true</code></pre>
              </div>
            </div>
          </el-collapse-item>

          <el-collapse-item title="getDateRange(type)" name="5">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>è·å–æŒ‡å®šç±»å‹çš„æ—¥æœŸèŒƒå›´</p>
              <p><strong>å‚æ•°ï¼š</strong></p>
              <ul>
                <li><code>type</code> - string - èŒƒå›´ç±»å‹ï¼š'today' | 'yesterday' | 'week' | 'month' | 'year'</li>
              </ul>
              <p><strong>è¿”å›å€¼ï¼š</strong>Array&lt;Date&gt; - æ—¥æœŸèŒƒå›´ [startDate, endDate]</p>
              <div class="code-example">
                <pre><code>import { utils } from '@edwardchan/web-toolkit'

const [start, end] = utils.getDateRange('today')
// => [ä»Šå¤© 00:00:00, ä»Šå¤© 23:59:59]</code></pre>
              </div>
            </div>
          </el-collapse-item>
        </el-collapse>
      </el-card>
    </div>

    <!-- ç»„ä»¶æ–‡æ¡£ -->
    <div id="components" class="section">
      <el-card shadow="hover">
        <template #header>
          <h3>ğŸ§© components - ç»„ä»¶å‘½åç©ºé—´</h3>
        </template>
        
        <el-collapse>
          <el-collapse-item title="TableColumn - è¡¨æ ¼åˆ—ç»„ä»¶" name="1">
            <div class="api-item">
              <p><strong>è¯´æ˜ï¼š</strong>åŸºäº Element Plus çš„ el-table-column äºŒæ¬¡å°è£…ï¼Œæä¾›æ›´ä¾¿æ·çš„é…ç½®å’Œæ‰©å±•åŠŸèƒ½</p>
              
              <p><strong>Propsï¼š</strong></p>
              <el-table :data="tableColumnProps" border>
                <el-table-column prop="name" label="å‚æ•°" width="150" />
                <el-table-column prop="type" label="ç±»å‹" width="150" />
                <el-table-column prop="default" label="é»˜è®¤å€¼" width="150" />
                <el-table-column prop="desc" label="è¯´æ˜" />
              </el-table>
              
              <p style="margin-top: 20px"><strong>ç¤ºä¾‹ï¼š</strong></p>
              <div class="code-example">
                <pre><code>&lt;template&gt;
  &lt;el-table :data="tableData"&gt;
    &lt;!-- åŸºç¡€ç”¨æ³• --&gt;
    &lt;TableColumn prop="name" label="å§“å" /&gt;
    
    &lt;!-- æ—¥æœŸæ ¼å¼åŒ– --&gt;
    &lt;TableColumn 
      prop="createTime" 
      label="åˆ›å»ºæ—¶é—´" 
      type="date"
      date-format="YYYY-MM-DD"
    /&gt;
    
    &lt;!-- çŠ¶æ€æ ‡ç­¾ --&gt;
    &lt;TableColumn 
      prop="status" 
      label="çŠ¶æ€" 
      type="status"
      :status-map="{
        1: { label: 'å¯ç”¨', type: 'success' },
        0: { label: 'ç¦ç”¨', type: 'danger' }
      }"
    /&gt;
  &lt;/el-table&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { components } from '@edwardchan/web-toolkit'
const { TableColumn } = components
&lt;/script&gt;</code></pre>
              </div>
            </div>
          </el-collapse-item>
        </el-collapse>
      </el-card>
    </div>

    <!-- ä½¿ç”¨æ–¹å¼ -->
    <el-card class="section" shadow="hover">
      <template #header>
        <h3>ğŸ“¦ å¯¼å…¥æ–¹å¼</h3>
      </template>
      
      <el-tabs type="border-card">
        <el-tab-pane label="å‘½åç©ºé—´å¯¼å…¥ï¼ˆæ¨èï¼‰">
          <div class="code-example">
            <pre><code>// ES Module
import { utils, components } from '@edwardchan/web-toolkit'

// ä½¿ç”¨å·¥å…·å‡½æ•°
utils.formatDate(new Date())

// ä½¿ç”¨ç»„ä»¶
const { TableColumn } = components</code></pre>
          </div>
        </el-tab-pane>
        
        <el-tab-pane label="æŒ‰éœ€å¯¼å…¥">
          <div class="code-example">
            <pre><code>// ES Module
import { formatDate, getRelativeTime, TableColumn } from '@edwardchan/web-toolkit'

// ç›´æ¥ä½¿ç”¨
formatDate(new Date())</code></pre>
          </div>
        </el-tab-pane>
        
        <el-tab-pane label="CommonJS">
          <div class="code-example">
            <pre><code>// CommonJS
const { utils, components } = require('@edwardchan/web-toolkit')

// ä½¿ç”¨
utils.formatDate(new Date())</code></pre>
          </div>
        </el-tab-pane>
      </el-tabs>
    </el-card>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const tableColumnProps = ref([
  { name: 'prop', type: 'string', default: '-', desc: 'å­—æ®µåç§°' },
  { name: 'label', type: 'string', default: '-', desc: 'åˆ—æ ‡é¢˜' },
  { name: 'width', type: 'string/number', default: '-', desc: 'åˆ—å®½åº¦' },
  { name: 'align', type: 'string', default: 'left', desc: 'å¯¹é½æ–¹å¼ï¼šleft/center/right' },
  { name: 'type', type: 'string', default: '-', desc: 'æ‰©å±•ç±»å‹ï¼šdate/status/selection/index' },
  { name: 'dateFormat', type: 'string', default: 'YYYY-MM-DD HH:mm:ss', desc: 'æ—¥æœŸæ ¼å¼' },
  { name: 'formatter', type: 'function', default: '-', desc: 'è‡ªå®šä¹‰æ ¼å¼åŒ–å‡½æ•°' },
  { name: 'statusMap', type: 'object', default: '{}', desc: 'çŠ¶æ€æ˜ å°„é…ç½®' },
  { name: 'showOverflowTooltip', type: 'boolean', default: 'true', desc: 'æº¢å‡ºæ˜¾ç¤ºæç¤º' }
])

const scrollTo = (id) => {
  document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' })
}

const openGithub = () => {
  window.open('https://github.com/ludwig-chan/web-toolkit', '_blank')
}
</script>

<style scoped>
.docs-container {
  padding: 20px;
}

h2 {
  margin: 0 0 24px 0;
  color: #303133;
  font-size: 24px;
}

.nav-card {
  margin-bottom: 24px;
}

.section {
  margin-bottom: 24px;
  scroll-margin-top: 20px;
}

h3 {
  margin: 0;
  color: #303133;
  font-size: 20px;
  font-weight: 600;
}

.api-item {
  padding: 16px;
}

.api-item p {
  margin: 12px 0;
  line-height: 1.6;
}

.api-item ul {
  margin: 8px 0;
  padding-left: 24px;
}

.api-item li {
  margin: 8px 0;
  line-height: 1.6;
}

.api-item code {
  padding: 2px 6px;
  background: #f4f4f5;
  border-radius: 3px;
  color: #e83e8c;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 13px;
}

.code-example {
  margin-top: 16px;
  background: #282c34;
  border-radius: 4px;
  padding: 16px;
}

.code-example pre {
  margin: 0;
  color: #abb2bf;
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 13px;
  line-height: 1.6;
  overflow-x: auto;
}
</style>
